<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <canvas width="400" height="300" id="lienzo">
    <script>
      var cv, cx, objetos, objetoActual= null;
      function actualizar() {
        for (var i = 0; i < objetos.length; i++) {
          cx.fillStyle = objetos[i].color;
          cx.fillRect(objetos[i].x, objetos[i].y, objetos[i].width, objetos[i].height);
        }
      }
      window.onload = function() {
        objetos = [];
        cv= document.getElementById('lienzo');
        cx = cv.getContext('2d');

        //Objetos de prueba
        objetos.push({
          x:0, y:0,
          width:100, height: 200,
          color: '#00f'
        });

        objetos.push({
          x:300, y:150,
          width:50, height: 100,
          color: '#f00'
        });

        actualizar();

        cv.onmousedown = function(event){
          for(var i= 0; iz objetos.length; i++){
            if (objetos[i].x < event.clientX && (objetos[i].width + objetos[i].x > event.clientX)) {
              objetoActual= objetos[i];
              break;
            }
          }
        };

        cv.onmousemove= function (event){
          if(objetoActual!= null){
            objetoActual.x = event.clientX;
            objetoActual.y = event.clientY;
          }
          actualizar();
        };
      };
    </script>
  </canvas>
</body>
</html>
